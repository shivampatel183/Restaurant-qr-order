<section class="page">
  <h2>Admin Panel</h2>

  <div class="grid grid-2">
    <div class="card">
      <h3>Create / Update Menu Item</h3>
      <label>Name</label>
      <input [ngModel]="draft().name" (ngModelChange)="updateDraftName($event)" />
      <label>Category ID</label>
      <input [ngModel]="draft().category_id" (ngModelChange)="updateDraftCategoryId($event)" />
      <label>Price</label>
      <input type="number" [ngModel]="draft().price" (ngModelChange)="updateDraftPrice($event)" />
      <button class="primary" style="margin-top: 0.75rem" [disabled]="saving()" (click)="saveMenuItem()">{{ saving() ? 'Saving...' : 'Save Item' }}</button>
    </div>

    <div class="card">
      <h3>Daily Summary</h3>
      <p>Total orders: {{ orders().length }}</p>
      <p>Paid orders: {{ paidCount }}</p>
      <button class="secondary" (click)="refresh()">Refresh</button>
    </div>
  </div>

  <div class="card" style="margin-top: 1rem;">
    <h3>Menu Items</h3>
    @for (item of menuItems(); track item.id) {
      <div style="display: flex; justify-content: space-between; border-top: 1px solid #e2e8f0; padding: 0.65rem 0;">
        <span>{{ item.name }} ({{ item.price }})</span>
        <button class="secondary" (click)="toggleAvailability(item)">
          {{ item.is_available ? 'Disable' : 'Enable' }}
        </button>
      </div>
    }
  </div>

  <div class="card" style="margin-top: 1rem;">
    <h3>Recent Orders</h3>
    @for (order of orders().slice(0, 20); track order.id) {
      <div style="display: flex; justify-content: space-between; border-top: 1px solid #e2e8f0; padding: 0.65rem 0;">
        <span>{{ order.id.slice(0, 8) }} Â· Table {{ order.table_id.slice(0, 6) }}</span>
        <app-order-status-badge [status]="order.status"></app-order-status-badge>
      </div>
    }
  </div>
</section>
